{% load price_filters %}
<article class="image-product bg-white rounded-lg shadow-md overflow-hidden transition-all duration-300 hover:shadow-xl opacity-0" _="on load transition my opacity to 1 over 0.3 seconds">
    {% if product.image %}
    <a href="{% url 'product-detail' product.pid %}">
        <div class="aspect-square overflow-hidden">
            {% if product.old_price %}
            <span class="absolute bg-gray-900 text-white text-md font-semibold m-3 p-2 rounded border-gray-600">-{{ product.get_precentage|floatformat:0 }}%
            </span>
            {% endif %}
            <img class="w-full h-full object-cover transition-transform duration-300 hover:scale-105" src="{{ product.image.url }}" alt="{{ product.title }}" loading="lazy">
        </div>
    {% endif %}
        <div class="flex flex-col items-center py-5 space-y-5">
            <h3 class="font-bold text-gray-800 text-xl line-clamp-2">{{ product.title }}</h3>
            <div class="flex gap-4 items-center mb-4">
                <span
                    class="inline-block bg-gray-100 rounded-full px-3 py-1 text-sm font-semibold text-gray-700">{{product.category}}</span>
                <span
                    class="inline-block bg-gray-100 rounded-full px-3 py-1 text-sm font-semibold text-gray-700">{{product.vendor}}</span>
            </div>
            <div class="pr-5">
                <div class="flex space-y-1">
                    <span class="block text-xl font-bold text-gray-900 current-product-price-{{ product.id }}">$ {{ product.price|formato_precio }}</span>
                    {% if product.old_price %}
                    <div class="flex items-center gap-2">
                        <span class="text-sm text-gray-500 ml-4 line-through">$ {{ product.old_price|formato_precio }}</span>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </a>
</article>