{% extends 'layouts/blank.html' %}
{% load static %}
{% load price_filters %}
{% block content %}

<div class="flex min-h-screen">

    <div class="hidden md:block w-64 bg-white shadow-sm min-h-screen">
        <nav class="mt-6 px-4">
            <a href="{% url 'dashboard-profile' %}"
                class="group flex items-center px-3 py-2 text-base font-medium rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-all duration-200">
                <svg class="mr-4 h-6 w-6 group-hover:text-gray-500" viewBox="0 0 24 24" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                    <g id="SVGRepo_iconCarrier">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M16.5 7.063C16.5 10.258 14.57 13 12 13c-2.572 0-4.5-2.742-4.5-5.938C7.5 3.868 9.16 2 12 2s4.5 1.867 4.5 5.063zM4.102 20.142C4.487 20.6 6.145 22 12 22c5.855 0 7.512-1.4 7.898-1.857a.416.416 0 0 0 .09-.317C19.9 18.944 19.106 15 12 15s-7.9 3.944-7.989 4.826a.416.416 0 0 0 .091.317z"
                            fill="#000000"></path>
                    </g>
                </svg>
                Perfil
            </a>
            <a href="{% url 'dashboard' %}"
                class="group flex items-center px-3 py-2 text-base font-medium rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-all duration-200">
                <svg class="mr-4 h-6 w-6 group-hover:text-gray-500" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                </svg>
                Panel
            </a>
            <a href="#"
                class="mt-1 group flex items-center px-3 py-2 text-base leading-6 font-semibold text-gray-600 rounded-md text-gray-900 hover:bg-gray-50 bg-gray-200">
                <svg class="mr-4 h-6 w-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                    <g id="SVGRepo_iconCarrier">
                        <path d="M3.17004 7.43994L12 12.5499L20.77 7.46991" stroke="#292D32" stroke-width="1.5"
                            stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M12 21.6099V12.5399" stroke="#292D32" stroke-width="1.5" stroke-linecap="round"
                            stroke-linejoin="round"></path>
                        <path
                            d="M9.92999 2.48L4.59 5.45003C3.38 6.12003 2.39001 7.80001 2.39001 9.18001V14.83C2.39001 16.21 3.38 17.89 4.59 18.56L9.92999 21.53C11.07 22.16 12.94 22.16 14.08 21.53L19.42 18.56C20.63 17.89 21.62 16.21 21.62 14.83V9.18001C21.62 7.80001 20.63 6.12003 19.42 5.45003L14.08 2.48C12.93 1.84 11.07 1.84 9.92999 2.48Z"
                            stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M17 13.24V9.58002L7.51001 4.09998" stroke="#292D32" stroke-width="1.5"
                            stroke-linecap="round" stroke-linejoin="round"></path>
                    </g>
                </svg>
                </svg>
                Ordenes
            </a>
            <a href="#"
                class="mt-1 group flex items-center px-3 py-2 text-base leading-6 font-medium text-gray-600 rounded-md hover:text-gray-900 hover:bg-gray-50">
                <svg class="mr-4 h-6 w-6" viewBox="0 0 32 32" enable-background="new 0 0 32 32" id="_x3C_Layer_x3E_"
                    version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000">
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                    <g id="SVGRepo_iconCarrier">
                        <g id="truck_x2C__logistics_x2C__transport_x2C__transportation_2_">
                            <g id="XMLID_215_">
                                <line fill="none" id="XMLID_259_" stroke="#263238" stroke-linecap="round"
                                    stroke-linejoin="round" stroke-miterlimit="10" x1="19.5" x2="10.5" y1="27.5"
                                    y2="27.5"></line>
                                <line fill="none" id="XMLID_230_" stroke="#263238" stroke-linecap="round"
                                    stroke-linejoin="round" stroke-miterlimit="10" x1="24" x2="3.5" y1="30.5" y2="30.5">
                                </line>
                                <line fill="none" id="XMLID_228_" stroke="#263238" stroke-linecap="round"
                                    stroke-linejoin="round" stroke-miterlimit="10" x1="1.6" x2="1.5" y1="30.5"
                                    y2="30.5"></line>
                                <polyline fill="none" id="XMLID_945_" points=" 3.5,27.5 2.5,27.5 2.5,25.5 "
                                    stroke="#263238" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-miterlimit="10"></polyline>
                                <line fill="none" id="XMLID_231_" stroke="#263238" stroke-linecap="round"
                                    stroke-linejoin="round" stroke-miterlimit="10" x1="17.5" x2="8.5" y1="25.5"
                                    y2="25.5"></line>
                                <line fill="none" id="XMLID_947_" stroke="#263238" stroke-linecap="round"
                                    stroke-linejoin="round" stroke-miterlimit="10" x1="4.5" x2="1.5" y1="25.5"
                                    y2="25.5"></line>
                                <path d=" M26.5,27.5H30c0.276,0,0.5-0.224,0.5-0.5v-1" fill="none" id="XMLID_232_"
                                    stroke="#263238" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-miterlimit="10"></path>
                                <circle cx="24" cy="28" fill="none" id="XMLID_216_" r="2.5" stroke="#263238"
                                    stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"></circle>
                                <circle cx="8" cy="28" fill="none" id="XMLID_217_" r="2.5" stroke="#263238"
                                    stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"></circle>
                                <circle cx="24" cy="28" fill="none" id="XMLID_254_" r="0.5" stroke="#263238"
                                    stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"></circle>
                                <circle cx="8" cy="28" fill="none" id="XMLID_955_" r="0.5" stroke="#263238"
                                    stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"></circle>
                                <path
                                    d="M28.105,11.5H23.5c-0.552,0-1,0.447-1,1v3 c0,1.656,1.344,3,3,3h5V18L28.105,11.5z"
                                    fill="none" id="XMLID_251_" stroke="#263238" stroke-miterlimit="10"></path>
                                <rect fill="none" height="2" id="XMLID_218_" stroke="#263238" stroke-linecap="round"
                                    stroke-linejoin="round" stroke-miterlimit="10" width="3" x="27.5" y="23.5"></rect>
                                <line fill="none" id="XMLID_2062_" stroke="#263238" stroke-linecap="round"
                                    stroke-linejoin="round" stroke-miterlimit="10" x1="1.5" x2="1.5" y1="6.5" y2="25.5">
                                </line>
                                <polyline fill="none" id="XMLID_219_" points=" 19.5,27.5 19.5,4.5 1.5,4.5 "
                                    stroke="#263238" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-miterlimit="10"></polyline>
                                <path d=" M19.5,25.5v-17h4.711c1.676,0,3.174,1.045,3.754,2.617L30.5,18v8" fill="none"
                                    id="XMLID_257_" stroke="#263238" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-miterlimit="10"></path>
                                <line fill="none" id="XMLID_220_" stroke="#263238" stroke-linecap="round"
                                    stroke-linejoin="round" stroke-miterlimit="10" x1="1.6" x2="1.5" y1="30.5"
                                    y2="30.5"></line>
                            </g>
                        </g>
                    </g>
                </svg>
                Seguimiento de Envio
            </a>
            <a href="{% url 'dashboard-address' %}"
                class="mt-1 group flex items-center px-3 py-2 text-base leading-6 font-medium text-gray-600 rounded-md hover:text-gray-900 hover:bg-gray-50">
                <svg class="mr-4 h-6 w-6 group-hover:text-gray-500" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                Mi dirección
            </a>
            <a href=""
                class="mt-1 group flex items-center px-3 py-2 text-base leading-6 font-medium text-gray-600 rounded-md hover:text-gray-900 hover:bg-gray-50">
                <svg class="mr-4 h-6 w-6 group-hover:text-gray-500" viewBox="0 0 25 25" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                    <g id="SVGRepo_iconCarrier">
                        <path d="M6 8.5H9M10.5 5.5V19.5M6 11.5H9M13 8.5H18M6 14.5H9M4.5 5.5H20.5V19.5H4.5V5.5Z"
                            stroke="#121923" stroke-width="1.2"></path>
                    </g>
                </svg>
                Detalles de cuenta
            </a>
            <a href="{% url 'account_logout' %}"
                class="mt-1 group flex items-center px-3 py-2 text-base leading-6 font-medium text-gray-600 rounded-md hover:text-gray-900 hover:bg-gray-50">
                <svg class="mr-4 h-6 w-6 group-hover:text-gray-500" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                </svg>
                Cerrar Sesion
            </a>
        </nav>
    </div>

    <div class="hidden lg:block flex-1 min-h-screen bg-gray-100">
        <div class="py-6">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 md:px-8">
                <div class="bg-white shadow overflow-hidden sm:rounded-lg">
                    <div class="px-4 py-5 border-b border-gray-200 sm:px-6">
                        <h3 class="text-lg leading-6 font-medium text-gray-900">
                            Tu Ordenes
                        </h3>
                    </div>

                    <div class="bg-white">
                        <div class="max-w-7xl mx-auto">
                            <div class="flex flex-col">
                                <div class="overflow-x-auto">
                                    <div class="py-2 align-middle inline-block min-w-full">
                                        <div class="shadow overflow-hidden border-b border-gray-200 sm:rounded-lg">
                                            <table class="min-w-full divide-y divide-gray-200">
                                                <thead class="bg-gray-50">
                                                    <tr>
                                                        <th scope="col"
                                                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                            Orden
                                                        </th>
                                                        <th scope="col"
                                                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                            Fecha
                                                        </th>
                                                        <th scope="col"
                                                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                            Estado
                                                        </th>
                                                        <th scope="col"
                                                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                            Pagado
                                                        </th>
                                                        <th scope="col"
                                                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                            Total
                                                        </th>
                                                        <th scope="col"
                                                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                            Actions
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody class="bg-white divide-y divide-gray-200">
                                                    {% for order in orders_list %}
                                                    <tr>
                                                        <td
                                                            class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                                            #{{ order.id }}
                                                        </td>
                                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            {{ order.order_date }}
                                                        </td>
                                                        <td class="px-6 py-4 whitespace-nowrap">
                                                            <span class="px-3 py-1 text-sm font-medium rounded-full 
                                                                {% if order.product_status == 'pending' %}bg-yellow-100 text-yellow-800
                                                                {% elif order.product_status == 'shipped' %}bg-blue-100 text-blue-800
                                                                {% elif order.product_status == 'delivered' %}bg-green-100 text-green-800
                                                                {% else %}bg-gray-100 text-gray-800{% endif %}">
                                                                {{ order.product_status|title }}
                                                            </span>
                                                        </td>
                                                        <td class="flex px-6 py-4 whitespace-nowrap">
                                                            {% if order.paid_status == True %}
                                                            <svg class="h-5 w-5 text-{% if order.paid_status %}green-500{% else %}red-500{% endif %}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                                                            </svg>
                                                            {% else %}
                                                            <svg class="h-5 w-5 text-{% if order.paid_status %}green-500{% else %}red-500{% endif %}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                                                            </svg>
                                                            {% endif %}
                                                            <span class="ml-2 text-sm font-medium text-gray-700">
                                                                {{ order.paid_status|yesno:"Pagado,Pendiente de pago" }}
                                                            </span>
                                                        </td>
                                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            $ {{ order.price|formato_precio }}
                                                        </td>
                                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            <a href="{% url 'order-detail' order.id %}"
                                                                class="text-indigo-600 hover:text-indigo-900">Ver detalles</a>
                                                        </td>
                                                    </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="lg:hidden flex-1 min-h-screen">
        <div class="pb-32">
            <header class="py-10">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <h2 class="text-3xl font-extrabold">
                        Tus Órdenes
                    </h2>
                    <p class="mt-2 text-lg">
                        Gestiona y revisa tus compras recientes
                    </p>
                </div>
            </header>
        </div>
    
        <main class="-mt-32">
            <div class="max-w-7xl mx-auto pb-12 px-4 sm:px-6 lg:px-8">
                <div class="bg-white rounded-lg">
                <div class="flex flex-col gap-10">
                        {% for order in orders_list %}
                        <div class="p-6 hover:bg-gray-50 transition duration-150 ease-in-out bg-white rounded-lg shadow-md overflow-hidden">
                            <div class="flex items-center justify-between">
                                <h3 class="text-lg font-semibold text-gray-900">
                                    Orden #{{ order.id }}
                                </h3>
                                <span class="px-3 py-1 text-sm font-medium rounded-full 
                                    {% if order.product_status == 'pending' %}bg-yellow-100 text-yellow-800
                                    {% elif order.product_status == 'shipped' %}bg-blue-100 text-blue-800
                                    {% elif order.product_status == 'delivered' %}bg-green-100 text-green-800
                                    {% else %}bg-gray-100 text-gray-800{% endif %}">
                                    {{ order.product_status|title }}
                                </span>
                            </div>
                            <div class="mt-2 sm:flex sm:justify-between">
                                <div class="sm:flex">
                                    <p class="flex items-center text-sm text-gray-500">
                                        <svg class="flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd" />
                                        </svg>
                                        {{ order.order_date|date:"d M Y, H:i" }}
                                    </p>
                                    <p class="mt-2 flex items-center text-sm text-gray-500 sm:mt-0 sm:ml-6">
                                        <svg class="flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
                                        </svg>
                                        $ {{ order.price|formato_precio }}
                                    </p>
                                </div>
                            </div>
                            <div class="mt-4 border-t border-gray-200 pt-4">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <svg class="h-5 w-5 text-{% if order.paid_status %}green-500{% else %}red-500{% endif %}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                            {% if order.paid_status %}
                                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                                            {% else %}
                                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                                            {% endif %}
                                        </svg>
                                        <span class="ml-2 text-sm font-medium text-gray-700">
                                            {{ order.paid_status|yesno:"Pagado,Pendiente de pago" }}
                                        </span>
                                    </div>
                                    <a href="{% url 'order-detail' order.id %}" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-gray-600 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                                        Ver detalles
                                    </a>
                                </div>
                            </div>
                        </div>
                        {% empty %}
                        <div class="p-6">
                            <p class="text-center text-gray-500">No hay órdenes disponibles.</p>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </main>
    </div>

</div>

{% endblock %}
